using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;

namespace SUO
{
	[Activity (Label = "Начальные данные")]
	public class MainActivity : Activity
	{
		protected override void OnCreate (Bundle bundle)
		{
			base.OnCreate (bundle);
			SetContentView (Resource.Layout.Main);


			double[,] table_for_P = new double[,] 
			{
				{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,	0, 0},
				{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,	0, 0},
				{600,  12,	1, 	1,  92,	18,	0.1,0.1,0,	-1,	-1,  0,   -1, 	-9,  -12, +2, 0, 05,0.4,644,0.9,0, 	 1},
				{800,  16,	4, 	1,  89, 18, 0.2,0.2,0,	-1, -1,  +1,  -1, 	-12, -15, +3, 0, 13,0.6,629,1.2,0, 	 1.8},
				{1000, 20,  6,	1,	86,	17,	0.2,0.2,0,	-1,	-2,	 +1,  -2,	-15, -19, +3, 0, 21,0.7,614,1.5,0,   2.9},
				{1200, 24,	8,	1,	83,	17,	0.2,0.2,0,	-1,	-2,	 +2,  -3,	-18, -22, +4, 0, 30,0.9,599,1.8,0,	 4.3},
				{1400, 28,	11,	1,	80,	17,	0.3,0.3,0,	-1,	-3,	 +2,  -4,	-21, -26, +4, 0, 39,1.1,585,2.1,0,	 6.1},
				{1600, 32,	13,	1,	77,	16,	0.3,0.4,0,	-1,	-4,	 +3,  -5,	-23, -29, +4, 0, 48,1.3,571,2.5,0,	 8.3},
				{1800, 36,	16,	1,	74,	16,	0.4,0.5,0,	-2,	-5,	 +3,  -6,	-26, -32, +5, 0, 57,1.5,557,2.9,0,	 11},
				{2000, 40,	18,	1,	71,	15,	0.4,0.6,0,	-2,	-6,	 +4,  -8,	-28, -35, +5, 1, 06,1.7,543,3.3,0,	 14},
				{2200, 44,	21,	1,	69,	15,	0.5,0.7,0,	-2,	-7,	 +5,  -10,	-30, -38, +5, 1, 16,1.9,530,3.6,0,	 18},
				{2400, 48,	24,	1,	67,	15,	0.5,0.8,0,	-2,	-8,	 +5,  -11,	-33, -41, +6, 1, 27,2.1,517,4.0,0,	 22},
				{2600, 52,	27,	1,	65,	15,	0.6,0.9,0,	-2,	-10, +6,  -13,	-35, -44, +6, 1, 37,2.4,504,4.4,0,	 26},
				{2800, 56,	30,	1,	63,	15,	0.6,1.1,-1,	-2,	-12, +8,  -15,	-38, -47, +6, 1, 48,2.6,491,4.8,0,	 30},
				{3000, 60,	33,	1,	61,	14,	0.7,1.3,-1,	-3,	-14, +9,  -17,	-40, -50, +6, 2, 00,2.9,478,5.2,100, 35},
				{3200, 64,	37,	1,	59,	14,	0.7,1.5,-1,	-3,	-16, +10, -19,	-42, -53, +6, 2, 12,3.2,466,5.6,100, 41},
				{3400, 68,	40,	1,	57,	14,	0.8,1.7,-1,	-3,	-18, +11, -21,	-44, -56, +6, 2, 24,3.6,454,6.0,100, 48},
				{3600, 72,	44,	1,	55,	13,	0.9,1.9,-1,	-4,	-20, +12, -24,	-46, -58, +6, 2, 37,3.9,442,6.5,100, 55},
				{3800, 76,	47,	1,	53,	13,	1.0,2.1,-1,	-4,	-23, +13, -27,	-48, -60, +6, 2, 50,4.3,430,7.0,100, 62},
				{4000, 80,	51,	1,	51,	13,	1.1,2.4,-1,	-4,	-26, +15, -30,	-50, -62, +5, 3, 04,4.7,419,7.5,100, 70},
				{4200, 84,	55,	1,	49,	13,	1.1,2.6,-1,	-4,	-29, +16, -33,	-52, -65, +5, 3, 18,5.1,408,8.0,100, 79},
				{4400, 88,	59,	1,	47,	12,	1.2,2.8,-1,	-5,	-32, +18, -36,	-54, -67, +5, 3, 33,5.6,398,8.5,100, 89},
				{4600, 92,	64,	1,	45,	12,	1.2,3.0,-1,	-5,	-35, +19, -39,	-55, -69, +5, 3, 49,6.1,388,9.0,100, 100},
				{4800, 96,	68,	1,	43,	12,	1.3,3.2,-1,	-5,	-38, +21, -42,	-57, -71, +4, 4, 05,6.6,378,9.5,200, 112},
				{5000, 100,	73,	1,	41,	11,	1.4,3.4,-1,	-5,	-42, +23, -46,	-58, -73, +4, 4, 22,7.1,368,10,	200, 126},
				{5200, 104,	77,	1,	39,	11,	1.5,3.9,-2,	-6,	-46, +24, -50,	-60, -75, +4, 4, 39,7.7,359,11,	200, 141},
				{5400, 108,	82,	1,	38,	11,	1.6,3.7,-2,	-6,	-50, +26, -54,	-62, -77, +3, 4, 57,8.3,351,11,	200, 157},
				{5600, 112,	88,	1,	36,	11,	1.8,3.8,-2,	-6,	-54, +27, -58,	-63, -79, +3, 5, 16,8.9,344,12,	200, 174},
				{5800, 116,	93,	1,	35,	12,	2.0,3.9,-2,	-6,	-59, +29, -62,	-65, -81, +2, 5, 36,9.6,338,12,	300, 192},
				{6000, 120,	99,	2,	34,	12,	2.1,4.0,-2,	-7,	-64, +31, -66,	-66, -83, +2, 5, 56,10,	332,13,	300, 211},
				{6200, 124,	105,2,	33,	12,	2.3,4.1,-2,	-7,	-69, +32, -70,	-68, -85, +2, 6, 17,11,	327,14,	300, 231},
				{6400, 128,	111,2,	32,	13,	2.6,4.2,-2,	-7,	-74, +34, -74,	-69, -87, +1, 6, 39,12,	323,14,	400, 253},
				{6600, 132,	117,2,	31,	13,	2.9,4.3,-2,	-7,	-79, +35, -78,	-70, -88, +1, 7, 02,12,	319,15,	400, 277},
				{6800, 136,	124,2,	30,	13,	3.1,4.3,-3,	-8,	-85, +37, -83,	-71, -89, 0,  7, 25,13,	315,15,	500, 304},
				{7000, 140,	130,2,	30,	14,	3.5,4.4,-3,	-8,	-91, +39, -88,	-72, -90, -1, 7, 49,14,	311,16,	500, 333},
				{7200, 144,	137,2,	29,	14,	3.7,4.4,-3,	-8,	-97, +40, -93,	-73, -92, -1, 8, 13,15,	308,17,	500, 363},
				{7400, 148,	144,2,	28,	14,	4.0,4.5,-4,	-9,	-103,+42, -98,	-74, -93, -2, 8, 39,16,	305,18,	600, 395},
				{7600, 152,	151,2,	27,	14,	4.3,4.5,-4,	-9,	-109,+43, -103,	-75, -94, -2, 9, 05,16,	302,18,	600, 428},
				{7800, 156,	159,2,	26,	14,	4.6,4.6,-4,	-9,	-116,+45, -108,	-76, -95, -3, 9, 32,17,	299,19,	700, 462},
				{8000, 160,	167,2,	26,	15,	4.9,4.6,-4,	-9,	-123,+47, -113,	-77, -96, -4, 10,00,18,	297,20,	700, 498},
				{8200, 164,	174,3,	25,	15,	5.3,4.6,-4,	-10,-130,+48, -118,	-78, -97, -4, 10,28,19,	295,20,	800, 536},
				{8400, 168,	182,3,	24,	15,	5.7,4.7,-5,	-10,-137,+50, -123,	-78, -98, -5, 10,57,20,	293,21,	800, 577},
				{8600, 172,	191,3,	23,	16,	6.1,4.7,-5,	-10,-144,+51, -128,	-79, -99, -5, 11,27,21,	291,22,	900, 620},
				{8800, 176,	199,3,	23,	16,	6.5,4.8,-5,	-10,-151,+53, -133,	-80, -100,-6, 11,58,22,	289,23,	1000,665},
				{9000, 180,	208,3,	22,	17,	6.9,4.8,-5,	-10,-159,+55, -139,	-81, -101,-7, 12,29,22,	288,23,	1000,713},
				{9200, 184,	217,3,	22,	17,	7.3,4.9,-6,	-10,-166,+56, -144,	-82, -102,-7, 13,01,23,	287,24,	1100,763},
				{9400, 188,	226,3,	21,	17,	7.7,4.9,-6,	-10,-174,+58, -149,	-82, -103,-8, 13,34,24,	286,25,	1200,815},
				{9600, 192,	235,3,	21,	17,	8.2,5.0,-6,	-11,-182,+59, -154,	-83, -104,-8, 14,07,25,	285,26,	1200,869},
				{9800, 196,	245,4,	20,	18,	8.7,5.0,-6,	-11,-190,+61, -159,	-84, -105,-9, 14,41,26,	284,26,	1300,926},
				{10000, 200,254,4,	20,	18,	9.2,5.1,-7,	-12,-198,+62, -164,	-85, -106,-9, 15,16,27,	283,27,	1400,985},
				{10200, 204,264,4,	20,	18,	9.6,5.1,-7,	-12,-207,+63, -169,	-86, -107,-10,15,52,28,	282,28,	1500,1050},
				{10400, 208,274,4,	19,	18,	10,	5.2,-7,	-12,-215,+65, -174,	-87, -108,-10,16,28,29,	282,29,	1600,1110},
				{10600, 212,285,4,	19,	18,	10,	5.3,-8,	-12,-224,+66, -179,	-87, -109,-11,17,05,30,	281,30,	1700,1180},
				{10800, 216,295,4,	18,	19,	11,	5.4,-8,	-13,-232,+68, -184,	-88, -110,-11,17,44,31,	281,31,	1800,1250},
				{11000, 220,306,5,	18,	19,	12,	5.5,-8,	-13,-241,+69, -189,	-89, -111,-12,18,23,32,	281,32,	1900,1320},
				{11200, 224,317,5,	18,	19,	13,	5.6,-8,	-13,-250,+70, -194,	-90, -112,-12,19,03,33,	281,32,	2000,1400},
				{11400, 228,329,5,	17,	19,	13,	5.7,-9,	-13,-259,+72, -199,	-90, -113,-13,19,44,34,	281,33,	2100,1480},
				{11600, 232,341,5,	17,	19,	14,	5.8,-9,	-14,-268,+73, -204,	-91, -114,-13,20,27,35,	281,34,	2200,1560},
				{11800, 236,353,5,	17,	20,	15,	5.9,-9,	-14,-277,+75, -209,	-91, -114,-14,21,11,36,	282,35,	2300,1650},
				{12200, 244,378,6,	16,	20,	16,	6.1,-10,-15,-295,+79, -220,	-93, -116,-15,22,42,38,	282,37,	2600,1830},
				{12400, 248,391,6,	15,	20,	17,	6.3,-10,-15,-304,+81, -225,	-94, -117,-16,23,29,39,	283,38,	2700,1930},
				{12600, 252,405,6,	15,	21,	18,	6.5,-11,-15,-314,+83, -230,	-95, -118,-17,24,18,40,	284,39,	2900,2040},
				{12800, 256,419,7,	14,	21,	19,	6.7,-11,-15,-324,+85, -235,	-96, -119,-18,25,09,41,	285,40,	3000,2150},
				{13000, 260,434,7,	14,	22,	20,	6.8,-11,-15,-334,+87, -240,	-97, -121,-18,26,01,42,	286,41,	3100,2270},
				{13200, 264,449,8,	13,	22,	21,	7.0,-12,-16,-344,+89, -245,	-98, -122,-19,26,55,43,	287,43,	3300,2400},
				{13400, 268,464,9,	12,	22,	22,	7.2,-12,-16,-354,+91, -250,	-99, -124,-20,27,52,44,	288,44,	3400,2530},
				{13600, 272,481,9,	11,	23,	23,	7.4,-13,-16,-365,+93, -255,	-100,-125,-21,28,52,45,	289,45,	3600,2670},
				{13800, 276,499,10,	11,	23,	24,	7.6,-13,-16,-376,+95, -259,	-102,-127,-21,29,55,46,	290,46,	3800,2820},
				{14000, 280,517,11,	10,	24,	26,	7.9,-14,-16,-387,+97, -263,	-103,-129,-22,31,01,47,	291,47,	4000,2980},
				{14200, 284,537,12,	9.3,24,	28,	8.2,-15,-16,-398,+99, -267,	-104,-130,-23,32,12,48,	293,48,	4200,3150},
				{14400, 288,558,14,	8.4,25,	30,	8.6,-15,-17,-410,+101,-271,	-106,-132,-23,33,29,50,	295,50,	4500,3340},
				{14600, 292,582,16,	7.3,25,	32,	9.0,-16,-17,-422,+103,-275,	-107,-134,-24,34,54,51,	298,52,	4700,3560},
				{14800, 296,609,20,	6.0,26,	35,	9.4,-17,-17,-434,+106,-279,	-109,-136,-25,36,31,53,	301,54,	5000,3810},
				{15000, 300,641,28,	4.4,26,	38,	9.7,-19,-17,-447,+109,-282,	-110,-138,-26,38,29,54,	304,56,	5300,4120},
				{15200, 304,686,0,	0,	27,	43,	10,	-20,-18,-464,+112,-283,	-112,-140,-27,41,11,57,	307,59,	5700,4560},
				{15300, 306,750,0,	0,	28,	48,	11,	-23,-20,-483,+116,-283,	-115,-144,-28,45,00,60,	311,63,	6200,5180}
			};

			Button button = FindViewById<Button> (Resource.Id.button1);
			EditText et1 = FindViewById<EditText> (Resource.Id.editText1);
			EditText et2 = FindViewById<EditText> (Resource.Id.editText2);
			EditText et3 = FindViewById<EditText> (Resource.Id.editText3);
			EditText et4 = FindViewById<EditText> (Resource.Id.editText4);
			EditText et5 = FindViewById<EditText> (Resource.Id.editText5);
			EditText et6 = FindViewById<EditText> (Resource.Id.editText6);
			EditText et7 = FindViewById<EditText> (Resource.Id.editText7);
			EditText et8 = FindViewById<EditText> (Resource.Id.editText8);
			EditText et9 = FindViewById<EditText> (Resource.Id.editText9);
			EditText et10 = FindViewById<EditText> (Resource.Id.editText10);
			TextView tv1 = FindViewById<TextView> (Resource.Id.textView1);
			TextView tv2 = FindViewById<TextView> (Resource.Id.textView2);
			TextView tv3 = FindViewById<TextView> (Resource.Id.textView3);
			TextView tv4 = FindViewById<TextView> (Resource.Id.textView4);
			TextView tv5 = FindViewById<TextView> (Resource.Id.textView5);
			TextView tv6 = FindViewById<TextView> (Resource.Id.textView6);
			TextView tv7 = FindViewById<TextView> (Resource.Id.textView7);
			TextView tv8 = FindViewById<TextView> (Resource.Id.textView8);

			string ZARYAD = et1.Text;
			int[] opornye_dalnosti = new int[3];
			/*
			var od0 = et2.Text;
			var od1 = et3.Text;
			var od2 = et4.Text;
			*/
			int h_op;
			int angle_on;
			int Tz;
			double V0sum;
			int group3;
			int group4;
			bool bool1 = Int32.TryParse (et2.Text, out opornye_dalnosti[0]);
			bool bool2 = Int32.TryParse (et3.Text, out opornye_dalnosti[1]);
			bool bool3 = Int32.TryParse (et4.Text, out opornye_dalnosti[2]);
			bool bool4 = Int32.TryParse (et5.Text, out h_op);
			bool bool5 = Int32.TryParse (et6.Text, out angle_on);
			bool bool6 = Int32.TryParse (et7.Text, out Tz);
			bool bool7 = Double.TryParse (et8.Text, out V0sum);
			bool bool8 = Int32.TryParse (et9.Text, out group3);
			bool bool9 = Int32.TryParse (et10.Text, out group4);
			int H_op = group4 / 100 + (group3 - h_op) / 10;
			/*
			string ZARYAD = "";
			int[] opornye_dalnosti = new int[3];
			string od_s = "";
			int h_op = 0;
			int angle_on = 0;
			int Tz = 0;
			double V0sum = 0;
			int group3 = 0;
			int group4 = 0;
			int H_op = 0;
			*/

			button.Click += (object sender, EventArgs e) => 
			{
				Intent intent = new Intent(this, typeof(GroupsActivity));
				intent.PutExtra("ZARYAD", ZARYAD);
				intent.PutExtra("opornye_dalnosti", opornye_dalnosti);
				intent.PutExtra("angle_on", angle_on);
				intent.PutExtra("Tz", Tz);
				intent.PutExtra("V0сум", V0sum);
				intent.PutExtra("H_op", H_op);

				int[] groups_of_vysota_vhoda = new int[3];

				string[] number_of_meteo = new string[3];

				bool tmp;
				string tmp2;
				for (int i = 0; i < 3; i++)
				{
					tmp2 = ToString(table_for_P[opornye_dalnosti[i] * 5 - 1, 21] / 100);
					tmp = Int32.TryParse(tmp2, out groups_of_vysota_vhoda[i]);
				}
				for (int i = 0; i < 3; i++)
				{
					if ((groups_of_vysota_vhoda[i] == 1) ||
						(groups_of_vysota_vhoda[i] == 2))
					{
						number_of_meteo[i] = "02";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[0];
					}
					else if ((groups_of_vysota_vhoda[i] >= 3) &&
						(groups_of_vysota_vhoda[i] <= 5))
					{
						number_of_meteo[i] = "04";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[1];
					}
					else if ((groups_of_vysota_vhoda[i] >= 6) &&
						(groups_of_vysota_vhoda[i] <= 9))
					{
						number_of_meteo[i] = "08";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[2];
					}
					else if ((groups_of_vysota_vhoda[i] >= 10) &&
						(groups_of_vysota_vhoda[i] <= 13))
					{
						number_of_meteo[i] = "12";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[3];
					}
					else if ((groups_of_vysota_vhoda[i] >= 14) &&
						(groups_of_vysota_vhoda[i] <= 17))
					{
						number_of_meteo[i] = "16";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[4];
					}
					else if ((groups_of_vysota_vhoda[i] >= 18) &&
						(groups_of_vysota_vhoda[i] <= 21))
					{
						number_of_meteo[i] = "20";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[5];
					}
					else if ((groups_of_vysota_vhoda[i] >= 22) &&
						(groups_of_vysota_vhoda[i] <= 27))
					{
						number_of_meteo[i] = "24";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[6];
					}
					else if ((groups_of_vysota_vhoda[i] >= 28) &&
						(groups_of_vysota_vhoda[i] <= 35))
					{
						number_of_meteo[i] = "30";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[7];
					}
					else if ((groups_of_vysota_vhoda[i] >= 36) &&
						(groups_of_vysota_vhoda[i] <= 45))
					{
						number_of_meteo[i] = "40";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[8];
					}
					else if ((groups_of_vysota_vhoda[i] >= 46) &&
						(groups_of_vysota_vhoda[i] <= 60))
					{
						number_of_meteo[i] = "50";
							//groups_of_vysota_vhoda[i] = groups_of_meteo[9];
					}
				}

				intent.PutExtra("number_of_meteo", number_of_meteo);
				StartActivity(intent);
			};
		}
	}
}